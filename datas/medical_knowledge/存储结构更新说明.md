# åŒ»ç–—çŸ¥è¯†æ•°æ®å­˜å‚¨ç»“æ„æ›´æ–°è¯´æ˜

## ğŸ“‹ æ›´æ–°æ¦‚è¿°

å·²æˆåŠŸå°†æ™ºè¯Šé€šç³»ç»Ÿçš„æ•°æ®å­˜å‚¨ç»“æ„ç»Ÿä¸€è¿ç§»åˆ° `datas/medical_knowledge/` ç›®å½•ä¸‹ï¼Œå¹¶æ ¹æ®çº¯æ–‡æœ¬ã€å›¾æ–‡ã€è¯­éŸ³ç­‰åŠŸèƒ½åˆ›å»ºäº†ç›¸åº”çš„å­æ–‡ä»¶å¤¹ã€‚

## ğŸ—‚ï¸ æ–°çš„ç›®å½•ç»“æ„

```
datas/medical_knowledge/
â”œâ”€â”€ text_data/                    # çº¯æ–‡æœ¬æ•°æ®
â”‚   â”œâ”€â”€ raw/                     # åŸå§‹æ–‡æœ¬æ•°æ®
â”‚   â”œâ”€â”€ processed/               # é¢„å¤„ç†åçš„æ–‡æœ¬æ•°æ®
â”‚   â””â”€â”€ embeddings/              # æ–‡æœ¬å‘é‡åŒ–æ•°æ®
â”œâ”€â”€ image_text_data/             # å›¾æ–‡æ•°æ®
â”‚   â”œâ”€â”€ raw/                     # åŸå§‹å›¾åƒå’Œæ–‡æœ¬æ•°æ®
â”‚   â”œâ”€â”€ processed/               # é¢„å¤„ç†åçš„å›¾åƒå’Œæ–‡æœ¬æ•°æ®
â”‚   â””â”€â”€ embeddings/              # å›¾åƒå’Œæ–‡æœ¬å‘é‡åŒ–æ•°æ®
â”œâ”€â”€ voice_data/                  # è¯­éŸ³æ•°æ®
â”‚   â”œâ”€â”€ raw/                     # åŸå§‹è¯­éŸ³æ–‡ä»¶
â”‚   â”œâ”€â”€ processed/               # é¢„å¤„ç†åçš„è¯­éŸ³æ•°æ®
â”‚   â””â”€â”€ embeddings/              # è¯­éŸ³å‘é‡åŒ–æ•°æ®
â”œâ”€â”€ vector_databases/            # å‘é‡æ•°æ®åº“
â”‚   â”œâ”€â”€ text/                    # çº¯æ–‡æœ¬å‘é‡æ•°æ®åº“
â”‚   â”œâ”€â”€ image/                   # å›¾åƒå‘é‡æ•°æ®åº“
â”‚   â”œâ”€â”€ voice/                   # è¯­éŸ³å‘é‡æ•°æ®åº“
â”‚   â””â”€â”€ multimodal/              # å¤šæ¨¡æ€å‘é‡æ•°æ®åº“
â”œâ”€â”€ training_data/               # è®­ç»ƒæ•°æ®
â”œâ”€â”€ test_data/                   # æµ‹è¯•æ•°æ®
â””â”€â”€ logs/                        # æ—¥å¿—æ–‡ä»¶
```

## ğŸ”§ ä¸»è¦æ›´æ–°å†…å®¹

### 1. åˆ›å»ºäº†åŒ»ç–—çŸ¥è¯†ç®¡ç†å™¨
- **æ–‡ä»¶**: `codes/ai_models/embedding_models/core/medical_knowledge_manager.py`
- **åŠŸèƒ½**: ç»Ÿä¸€ç®¡ç†ä¸åŒç±»å‹æ•°æ®çš„å­˜å‚¨è·¯å¾„å’Œæ“ä½œ
- **ç‰¹æ€§**: 
  - è‡ªåŠ¨åˆ›å»ºç›®å½•ç»“æ„
  - è·¯å¾„æ˜ å°„å’ŒéªŒè¯
  - æ•°æ®æ‘˜è¦ç»Ÿè®¡
  - æ–‡ä»¶æ“ä½œç®¡ç†

### 2. æ›´æ–°äº†é…ç½®æ–‡ä»¶
- **ç»Ÿä¸€é…ç½®**: `config/medical_knowledge_config.json`
- **æ›´æ–°ç°æœ‰é…ç½®**: æ‰€æœ‰é…ç½®æ–‡ä»¶ä¸­çš„è·¯å¾„å·²æ›´æ–°ä¸ºæ–°ç»“æ„
- **æ”¯æŒçš„æ•°æ®ç±»å‹**: text, image_text, voice, multimodal

### 3. ä¿®æ”¹äº†æ ¸å¿ƒä»£ç 
- **å›¾åƒå‘é‡åŒ–**: `core/image_vectorization.py` - ä½¿ç”¨æ–°çš„è·¯å¾„ç®¡ç†
- **æ–‡æœ¬é¢„å¤„ç†**: `processors/text_preprocessing.py` - æ›´æ–°è¾“å‡ºè·¯å¾„
- **å›¾åƒæ–‡æœ¬é¢„å¤„ç†**: `processors/image_text_preprocessing.py` - é€‚é…æ–°ç»“æ„

### 4. åˆ›å»ºäº†æµ‹è¯•è„šæœ¬
- **ç®€å•æµ‹è¯•**: `test_simple_structure.py` - éªŒè¯åŸºç¡€åŠŸèƒ½
- **å®Œæ•´æµ‹è¯•**: `test_medical_knowledge_structure.py` - å…¨é¢æµ‹è¯•

## ğŸ“Š æ•°æ®è¿ç§»çŠ¶æ€

### å·²è¿ç§»çš„æ•°æ®
- **æ–‡æœ¬æ•°æ®**: 3ä¸ªæ–‡ä»¶å·²ä»åŸå§‹ä½ç½®è¿ç§»åˆ° `text_data/raw/`
  - GBT 14396-2016(ç–¾ç—…åˆ†ç±»ä¸ä»£ç ).pdf
  - ä¸´åºŠè·¯å¾„.xlsx
  - å›½å®¶ä¸´åºŠç‰ˆ2.0ç–¾ç—…è¯Šæ–­ç¼–ç ï¼ˆICD-10ï¼‰.xlsx

- **å›¾åƒæ•°æ®**: 1ä¸ªç›®å½•å·²è¿ç§»åˆ° `image_text_data/raw/`
  - chestX-rays/

### å¾…å¤„ç†çš„æ•°æ®
- **processed_vqa_data/**: åŸVQAæ•°æ®ç›®å½•ï¼Œç°åœ¨ä¸ºç©º
- **å…¶ä»–åŸå§‹æ•°æ®**: éœ€è¦æ ¹æ®ç±»å‹è¿ç§»åˆ°å¯¹åº”ç›®å½•

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. è·å–æ•°æ®è·¯å¾„
```python
from core.medical_knowledge_manager import MedicalKnowledgeManager

manager = MedicalKnowledgeManager()

# è·å–æ–‡æœ¬æ•°æ®è·¯å¾„
text_raw_path = manager.get_path("text", "raw")
text_processed_path = manager.get_path("text", "processed", "data.csv")

# è·å–å›¾åƒæ•°æ®è·¯å¾„
image_raw_path = manager.get_path("image_text", "raw")
image_embeddings_path = manager.get_path("image_text", "embeddings", "vectors.npy")

# è·å–å‘é‡æ•°æ®åº“è·¯å¾„
vector_db_path = manager.get_vector_db_path("text")
```

### 2. æ•°æ®æ‘˜è¦
```python
summary = manager.get_data_summary()
print(json.dumps(summary, indent=2, ensure_ascii=False))
```

### 3. æ–‡ä»¶æ“ä½œ
```python
# åˆ—å‡ºæ–‡ä»¶
files = manager.list_files("text", "raw", "*.txt")

# æ¸…ç†æ—§æ–‡ä»¶
cleaned_count = manager.cleanup_old_files("text", "processed", days=30)
```

## âœ… æµ‹è¯•ç»“æœ

æ‰€æœ‰æµ‹è¯•å·²é€šè¿‡ï¼Œæ–°å­˜å‚¨ç»“æ„å·¥ä½œæ­£å¸¸ï¼š

- âœ… ç›®å½•ç»“æ„åˆ›å»ºæˆåŠŸ
- âœ… è·¯å¾„ç”Ÿæˆæ­£ç¡®
- âœ… æ•°æ®ç±»å‹æ˜ å°„æ­£å¸¸
- âœ… æ–‡ä»¶æ“ä½œåŠŸèƒ½æ­£å¸¸
- âœ… æ•°æ®æ‘˜è¦ç»Ÿè®¡å‡†ç¡®

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **å‘åå…¼å®¹**: æ—§çš„ `processed_vqa_data/` ç›®å½•ä»ç„¶å­˜åœ¨ï¼Œä½†å»ºè®®ä½¿ç”¨æ–°ç»“æ„
2. **é…ç½®æ›´æ–°**: æ‰€æœ‰ç›¸å…³é…ç½®æ–‡ä»¶å·²æ›´æ–°ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹
3. **æ•°æ®è¿ç§»**: ç°æœ‰æ•°æ®å·²è‡ªåŠ¨è¿ç§»åˆ°æ–°ç»“æ„
4. **æ—¥å¿—è®°å½•**: æ‰€æœ‰æ“ä½œéƒ½æœ‰è¯¦ç»†çš„æ—¥å¿—è®°å½•

## ğŸ”„ åç»­å·¥ä½œ

1. **æ•°æ®è¿ç§»**: å°†å…¶ä»–åŸå§‹æ•°æ®è¿ç§»åˆ°å¯¹åº”ç›®å½•
2. **åŠŸèƒ½æ‰©å±•**: æ ¹æ®å®é™…éœ€æ±‚æ·»åŠ æ›´å¤šæ•°æ®ç±»å‹æ”¯æŒ
3. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–å¤§æ•°æ®é‡å¤„ç†æ€§èƒ½
4. **ç›‘æ§å‘Šè­¦**: æ·»åŠ å­˜å‚¨ç©ºé—´å’Œæ€§èƒ½ç›‘æ§

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- æ—¥å¿—æ–‡ä»¶: `datas/medical_knowledge/logs/medical_knowledge_manager.log`
- æµ‹è¯•è„šæœ¬: `test_simple_structure.py`
- é…ç½®æ–‡æ¡£: `datas/medical_knowledge/README.md`
