# æ™ºè¯Šé€šç³»ç»Ÿ - é¡¹ç›®å¯åŠ¨æŒ‡å—

## ğŸ“‹ ç›®å½•

- [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
- [ç¯å¢ƒè¦æ±‚](#ç¯å¢ƒè¦æ±‚)
- [å¿«é€Ÿå¯åŠ¨](#å¿«é€Ÿå¯åŠ¨)
- [è¯¦ç»†å¯åŠ¨æ­¥éª¤](#è¯¦ç»†å¯åŠ¨æ­¥éª¤)
  - [åç«¯æœåŠ¡å¯åŠ¨](#åç«¯æœåŠ¡å¯åŠ¨)
  - [å‰ç«¯æœåŠ¡å¯åŠ¨](#å‰ç«¯æœåŠ¡å¯åŠ¨)
- [éªŒè¯ç³»ç»Ÿè¿è¡Œ](#éªŒè¯ç³»ç»Ÿè¿è¡Œ)
- [å¸¸ç”¨å‘½ä»¤](#å¸¸ç”¨å‘½ä»¤)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- [å¼€å‘ç¯å¢ƒé…ç½®](#å¼€å‘ç¯å¢ƒé…ç½®)

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

**æ™ºè¯Šé€š**æ˜¯ä¸€ä¸ªåŸºäºäººå·¥æ™ºèƒ½çš„å¤šæ¨¡æ€æ™ºèƒ½åŒ»ç”Ÿé—®è¯Šç³»ç»Ÿï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼š

- **åç«¯**: Python + FastAPI + PostgreSQL
- **å‰ç«¯**: Vue 3 + TypeScript + Ant Design Vue
- **é€šä¿¡**: RESTful API + WebSocket
- **éƒ¨ç½²**: Dockeræ”¯æŒ

## ğŸ› ï¸ ç¯å¢ƒè¦æ±‚

### åŸºç¡€ç¯å¢ƒ

| è½¯ä»¶ | ç‰ˆæœ¬è¦æ±‚ | è¯´æ˜ |
|------|----------|------|
| **Python** | 3.8+ | åç«¯è¿è¡Œç¯å¢ƒ |
| **Node.js** | 18.0+ | å‰ç«¯æ„å»ºç¯å¢ƒ |
| **npm** | 8.0+ | å‰ç«¯åŒ…ç®¡ç†å™¨ |
| **Git** | 2.0+ | ä»£ç ç‰ˆæœ¬æ§åˆ¶ |

### å¯é€‰ç¯å¢ƒ

| è½¯ä»¶ | ç‰ˆæœ¬è¦æ±‚ | è¯´æ˜ |
|------|----------|------|
| **Docker** | 20.0+ | å®¹å™¨åŒ–éƒ¨ç½² |
| **Redis** | 6.0+ | ç¼“å­˜æœåŠ¡ |
| **PostgreSQL** | 13.0+ | ç”Ÿäº§æ•°æ®åº“ |

### æ“ä½œç³»ç»Ÿæ”¯æŒ

- âœ… **macOS** 10.15+
- âœ… **Ubuntu** 18.04+
- âœ… **Windows** 10+ (WSL2æ¨è)
- âœ… **CentOS** 7+

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### æ–¹å¼ä¸€ï¼šä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd zhi_zhen_tong_system

# 2. ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
cd codes
chmod +x start-all.sh
./start-all.sh
```

### æ–¹å¼äºŒï¼šDockerå¯åŠ¨

```bash
# 1. ä½¿ç”¨Docker Compose
cd codes
docker-compose up -d

# 2. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps
```

## ğŸ“ è¯¦ç»†å¯åŠ¨æ­¥éª¤

### åç«¯æœåŠ¡å¯åŠ¨

#### 1. ç¯å¢ƒå‡†å¤‡

```bash
# è¿›å…¥åç«¯ç›®å½•
cd codes/backend

# æ£€æŸ¥Pythonç‰ˆæœ¬
python3 --version  # åº”è¯¥æ˜¯3.8+
```

#### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# macOS/Linux:
source venv/bin/activate
# Windows:
# venv\Scripts\activate
```

#### 3. å®‰è£…ä¾èµ–

```bash
# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt

# éªŒè¯å®‰è£…
pip list | grep fastapi
```

#### 4. æ•°æ®åº“åˆå§‹åŒ–

```bash
# åˆ›å»ºæ•°æ®åº“è¡¨ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
python3 -c "
from app.database import create_tables
create_tables()
print('âœ… æ•°æ®åº“åˆå§‹åŒ–å®Œæˆ')
"
```

#### 5. å¯åŠ¨åç«¯æœåŠ¡

```bash
# æ–¹å¼ä¸€ï¼šå¼€å‘æ¨¡å¼å¯åŠ¨
chmod +x start-dev.sh
./start-dev.sh

# æ–¹å¼äºŒï¼šæ‰‹åŠ¨å¯åŠ¨
python3 -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload

# æ–¹å¼ä¸‰ï¼šåå°å¯åŠ¨
nohup python3 -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload > logs/backend.log 2>&1 &
```

#### 6. éªŒè¯åç«¯æœåŠ¡

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8000/health

# æŸ¥çœ‹APIæ–‡æ¡£
open http://localhost:8000/docs
```

### å‰ç«¯æœåŠ¡å¯åŠ¨

#### 1. ç¯å¢ƒå‡†å¤‡

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd codes/frontend

# æ£€æŸ¥Node.jsç‰ˆæœ¬
node --version  # åº”è¯¥æ˜¯18.0+
npm --version   # åº”è¯¥æ˜¯8.0+
```

#### 2. å®‰è£…ä¾èµ–

```bash
# å®‰è£…å‰ç«¯ä¾èµ–
npm install

# éªŒè¯å®‰è£…
npm list vue
```

#### 3. ç¯å¢ƒé…ç½®ï¼ˆå¯é€‰ï¼‰

```bash
# å¤åˆ¶ç¯å¢ƒé…ç½®æ–‡ä»¶
cp env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
# vim .env
```

#### 4. å¯åŠ¨å‰ç«¯æœåŠ¡

```bash
# æ–¹å¼ä¸€ï¼šå¼€å‘æ¨¡å¼å¯åŠ¨
chmod +x start-dev.sh
./start-dev.sh

# æ–¹å¼äºŒï¼šæ‰‹åŠ¨å¯åŠ¨
npm run dev

# æ–¹å¼ä¸‰ï¼šåå°å¯åŠ¨
nohup npm run dev > ../backend/logs/frontend.log 2>&1 &
```

#### 5. éªŒè¯å‰ç«¯æœåŠ¡

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
curl http://localhost:8080

# æ‰“å¼€æµè§ˆå™¨
open http://localhost:8080
```

## âœ… éªŒè¯ç³»ç»Ÿè¿è¡Œ

### 1. æœåŠ¡ç«¯ç‚¹æ£€æŸ¥

| æœåŠ¡ | åœ°å€ | çŠ¶æ€æ£€æŸ¥ |
|------|------|----------|
| **å‰ç«¯ç•Œé¢** | http://localhost:8080 | æ‰“å¼€æµè§ˆå™¨è®¿é—® |
| **åç«¯API** | http://localhost:8000 | `curl http://localhost:8000/health` |
| **APIæ–‡æ¡£** | http://localhost:8000/docs | æŸ¥çœ‹Swaggeræ–‡æ¡£ |

### 2. åŠŸèƒ½éªŒè¯

```bash
# 1. ç”¨æˆ·æ³¨å†Œæµ‹è¯•
curl -X POST "http://localhost:8000/auth/register" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "test",
    "email": "test@example.com",
    "password": "test123456"
  }'

# 2. ç”¨æˆ·ç™»å½•æµ‹è¯•
curl -X POST "http://localhost:8000/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "test",
    "password": "test123456"
  }'
```

### 3. ç³»ç»ŸçŠ¶æ€ç›‘æ§

```bash
# æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
cd codes
./status.sh

# æŸ¥çœ‹æ—¥å¿—
tail -f backend/logs/backend.log
tail -f backend/logs/frontend.log
```

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### æœåŠ¡ç®¡ç†

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
./start-all.sh

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./status.sh

# åœæ­¢æ‰€æœ‰æœåŠ¡
./stop-all.sh

# é‡å¯æœåŠ¡
./stop-all.sh && ./start-all.sh
```

### å¼€å‘è°ƒè¯•

```bash
# åç«¯å¼€å‘
cd codes/backend
source venv/bin/activate
python3 -m uvicorn app.main:app --reload --log-level debug

# å‰ç«¯å¼€å‘
cd codes/frontend
npm run dev

# ä»£ç æ ¼å¼åŒ–
npm run format
npm run lint
```

### æ—¥å¿—æŸ¥çœ‹

```bash
# å®æ—¶æŸ¥çœ‹åç«¯æ—¥å¿—
tail -f codes/backend/logs/backend.log

# å®æ—¶æŸ¥çœ‹å‰ç«¯æ—¥å¿—
tail -f codes/backend/logs/frontend.log

# æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
tail -f codes/logs/*.log
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ç«¯å£å ç”¨

```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
lsof -i :8000  # åç«¯ç«¯å£
lsof -i :8080  # å‰ç«¯ç«¯å£

# æ€æ­»å ç”¨è¿›ç¨‹
kill -9 <PID>
```

#### 2. ä¾èµ–å®‰è£…å¤±è´¥

```bash
# Pythonä¾èµ–é—®é¢˜
pip install --upgrade pip
pip cache purge
pip install -r requirements.txt --force-reinstall

# Node.jsä¾èµ–é—®é¢˜
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

#### 3. æ•°æ®åº“é—®é¢˜

```bash
# é‡æ–°åˆ›å»ºæ•°æ®åº“
rm codes/backend/*.db
cd codes/backend
python3 -c "
from app.database import create_tables
create_tables()
"
```

#### 4. æƒé™é—®é¢˜

```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x codes/*.sh
chmod +x codes/backend/*.sh
chmod +x codes/frontend/*.sh
```

### é”™è¯¯æ—¥å¿—åˆ†æ

#### åç«¯é”™è¯¯

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
cd codes/backend
tail -100 logs/backend.log

# å¸¸è§é”™è¯¯è§£å†³
# - æ•°æ®åº“è¿æ¥å¤±è´¥ï¼šæ£€æŸ¥æ•°æ®åº“æ–‡ä»¶æƒé™
# - æ¨¡å—å¯¼å…¥é”™è¯¯ï¼šæ£€æŸ¥è™šæ‹Ÿç¯å¢ƒå’Œä¾èµ–
# - ç«¯å£å ç”¨ï¼šæ›´æ¢ç«¯å£æˆ–æ€æ­»å ç”¨è¿›ç¨‹
```

#### å‰ç«¯é”™è¯¯

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
cd codes/frontend
tail -100 ../backend/logs/frontend.log

# å¸¸è§é”™è¯¯è§£å†³
# - ç¼–è¯‘é”™è¯¯ï¼šæ£€æŸ¥TypeScriptè¯­æ³•
# - ä¾èµ–é”™è¯¯ï¼šé‡æ–°å®‰è£…node_modules
# - ç½‘ç»œé”™è¯¯ï¼šæ£€æŸ¥åç«¯APIè¿æ¥
```

## ğŸ”§ å¼€å‘ç¯å¢ƒé…ç½®

### IDEé…ç½®æ¨è

#### VS Codeæ’ä»¶

```json
{
  "recommendations": [
    "ms-python.python",
    "Vue.volar",
    "bradlc.vscode-tailwindcss",
    "ms-vscode.vscode-typescript-next",
    "esbenp.prettier-vscode"
  ]
}
```

#### PyCharmé…ç½®

1. é…ç½®Pythonè§£é‡Šå™¨ä¸ºè™šæ‹Ÿç¯å¢ƒ
2. å¯ç”¨FastAPIæ”¯æŒ
3. é…ç½®ä»£ç æ ¼å¼åŒ–å·¥å…·

### ç¯å¢ƒå˜é‡é…ç½®

#### åç«¯ç¯å¢ƒå˜é‡ (.env)

```bash
# æ•°æ®åº“é…ç½®
DATABASE_URL=sqlite:///./zhizhentong.db

# JWTé…ç½®
SECRET_KEY=your-secret-key-here
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# APIé…ç½®
API_V1_STR=/api/v1
PROJECT_NAME=æ™ºè¯Šé€šç³»ç»Ÿ

# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO
```

#### å‰ç«¯ç¯å¢ƒå˜é‡ (.env)

```bash
# APIé…ç½®
VITE_API_BASE_URL=http://localhost:8000
VITE_API_TIMEOUT=10000

# åº”ç”¨é…ç½®
VITE_APP_TITLE=æ™ºè¯Šé€šç³»ç»Ÿ
VITE_APP_VERSION=1.0.0
```

### Gité…ç½®

```bash
# é…ç½®Gité’©å­
cd .git/hooks
cp pre-commit.sample pre-commit
chmod +x pre-commit

# é…ç½®å¿½ç•¥æ–‡ä»¶
echo "
# æ—¥å¿—æ–‡ä»¶
*.log

# æ•°æ®åº“æ–‡ä»¶
*.db

# ç¯å¢ƒæ–‡ä»¶
.env

# ä¸´æ—¶æ–‡ä»¶
.DS_Store
" >> .gitignore
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æŒ‰ä»¥ä¸‹é¡ºåºæ’æŸ¥ï¼š

1. **æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†**
2. **æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶**
3. **æŸ¥çœ‹é¡¹ç›®Issueåˆ—è¡¨**
4. **è”ç³»å¼€å‘å›¢é˜Ÿ**

---

**å¼€å‘å›¢é˜Ÿ**: æ™ºè¯Šé€šå¼€å‘å›¢é˜Ÿ  
**æ›´æ–°æ—¶é—´**: 2024å¹´  
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0
